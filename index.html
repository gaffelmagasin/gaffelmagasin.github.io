<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAFFEL</title>

	<style>
		@font-face {
		  font-family: newsagent;
		  src: url(Newsagent-Regular.ttf) format("truetype");
		}
		.blog_cont{
			height: 100%;
			margin:10px; 
			background: #ebebebff;
		}
		.blog_row {
			float: left;
			background: #ff0000ff;
		}
		.blog_img{
			float: right;
			width: 200px;
			background: #ffff00ff;
		}
		.blog_cont::after{
		    content: "";
		    display: table;
		    clear: both;
		}
		.blog_title {
		  font-family: newsagent;
		  font-size: 50px;
		}
	</style>
</head>
 
<body>
    <div id ='blogg_inlägg'></div>
    <script>

	function content_of_tag(str,tag,start){
		let start_index = str.indexOf("<" + tag + ">",start);
		let end_index =   str.indexOf("</" + tag + ">",start);
		
		if(start_index == -1 || end_index == -1){return -1;}
		let content = str.substring(start_index + tag.length + 2,end_index);
		return content;
	}

	var buffer = ``
	    
	fetch('data.txt')
	  .then(function(resp) { 
		  return resp.text()
	   })
	  .then(function(resp) {
		var a_str = resp;
		console.log(a_str);

		var i = 0;
		var looks = 0;
		var article_i = 0
		while(i < a_str.length){
			var index = a_str.indexOf("<artikel>",i);
			
			i = index+1;
			if(index == -1){
				i = a_str.length;
			}
			else{
				var start_index = index+9
				var end_index = a_str.indexOf("</artikel>",index);
				
				var content = a_str.substring(start_index,end_index);

				//console.log(content);

				var article_index = content_of_tag(content,"index",0);
				var titel = content_of_tag(content,"titel",0);
				var preamble = content_of_tag(content,"ingress",0);
				//console.log(article_index);
				//console.log(titel);
				//console.log(preamble);

				buffer += `<div class = blog_cont>
					<div class = blog_row>
     						<div class = "blog_title">${titel}</div>
			        		<div style="font-size:small">${preamble}</div>
      					</div>
	   				<div class = blog_img>
						<p>hjälp</p>
 					</div>
			        </div>`

				
				article_i++
			}
		}
		
	
	    document.getElementById('blogg_inlägg').innerHTML = buffer
	  })
	

    </script>
</body>
 
</html>
