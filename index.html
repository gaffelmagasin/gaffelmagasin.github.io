<!DOCTYPE html>
<html lang="en">
 
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>GAFFEL</title>
	<link rel="icon" type="image/x-icon" href="/favicon.ico">
	
	<style>
		@font-face {
		  font-family: newsagent;
		  src: url(font/Newsagent-Regular.ttf) format("truetype");
		}
		@font-face {
		  font-family: morfeta;
		  src: url(font/MorfetaGealmord-5158V.otf) format("opentype");
		}
		
		body{
			background-color: #044827FF;
		}
		
		.blog_area{
			background: #01010100;
			width: clamp(50px,90vw,1000px);
		}
		.blog_cont{
			margin-bottom: 10px;
			background: #000000ff;
		}
		.blog_row {
			margin: 1%;
			float: left;
			background: #00000000;
			width: 40%;
		}
		.blog_img{
			float: right;
			width: 55%;
			background: #505050ff;
		}
		.blog_cont::after{
		    content: "";
		    display: table;
		    clear: both;
		}
		.blog_title {
		  font-family: morfeta;
		  font-size: clamp(10px,4vw,50px);
		  line-height: 83%;
		  color: #FFFFFFFF;
		}
		.blog_preamble{
			font-size: clamp(5px,2vw,20px);
			color: #FFFFFFFF;
		}
	</style>
</head>
 
<body>
	
	<script>
		function open_article(str){
			window.location.href = 'https://gaffelmagasin.github.io/artikel' + '?=' + str;
		}
		function content_of_tag(str,tag,start){
			let start_index = str.indexOf("<" + tag + ">",start);
			let end_index =   str.indexOf("</" + tag + ">",start);
			
			if(start_index == -1 || end_index == -1){return -1;}
			let content = str.substring(start_index + tag.length + 2,end_index);
			return content;
		}

		function draw_article_button(div_id, article_name){
			
			fetch('artiklar/' + article_name + '/info.txt')
			.then(function(resp){return resp.text()})
			.then(function(resp){

				var a_str = resp;
				
				var titel = content_of_tag(a_str,"titel",0).toUpperCase();
				var ingress = content_of_tag(a_str,"ingress",0);
				
				var new_html = `<div>
					<img src = "https://i.imgur.com/4RzXsjc.png" class = blog_img></img>
     					<div class = blog_row>
     						<div class = blog_title>${titel}</div>
			        		<div class = blog_preamble>${ingress}</div>
      					</div>
			        </div>`

				 document.getElementById(div_id).innerHTML = new_html;
			
				var element = document.getElementById(div_id); //grab the element
				element.onmouseover = function(){
					var element2 = document.getElementById(div_id);
					element2.style.background = "#044827FF";
					console.log("nudd");
				}
			    	element.onmouseout = function(){
					var element2 = document.getElementById(div_id);
					element2.style.background = "#000000FF";
				}
			    	element.onclick = function(){
					console.log(article_name);
					open_article(article_name)
				}
			});
			
			
		}
	</script>
	
    	<div id ='blogg_inlÃ¤gg' class = blog_area>
		<div id = 'main1' class = blog_cont><script>draw_article_button('main1','rostiga-roadtrips')</script></div>
		<div id = 'main2' class = blog_cont><script>draw_article_button('main2','hawaiiskjortan')</script></div>
		<div id = 'main3' class = blog_cont><script>draw_article_button('main3','rostiga-roadtrips')</script></div>   
	 </div>
    <!-- <iframe id="game-iframe" src="https://bolibompa-cdn.dojnaz.net/svt/spel/drakens-varld" width="600" height="500" title="drakens-varld"></iframe> -->


</body>
 
</html>
