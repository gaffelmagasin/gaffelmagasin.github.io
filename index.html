<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAFFEL</title>
</head>
 
<body>
    <div id ='blogg_inlägg'></div>
    <script>

	function content_of_tag(str,tag,start){
		let start_index = str.indexOf("<" + tag + ">",start) + tag.length + 2;
		let end_index =   str.indexOf("</" + tag + ">",start);
		
		console.log("<" + tag + ">");
		console.log("</" + tag + ">");
		
		if(start_index == -1 || end_index == -1){return -1;}
		let content = str.substring(start_index,end_index);
		return content;
	}

	var buffer = ``
	    
	fetch('data.txt')
	  .then(function(resp) { 
		  return resp.text()
	   })
	  .then(function(resp) {
		var a_str = resp;
		console.log(a_str);

		var i = 0;
		var looks = 0;
		var article_i = 0
		while(i < a_str.length){
			var index = a_str.indexOf("<artikel>",i);
			
			i = index+1;
			if(index == -1){
				i = a_str.length;
			}
			else{
				var start_index = index+9
				var end_index = a_str.indexOf("</artikel>",index);
				
				var content = a_str.substring(start_index,end_index);

				console.log(content);

				var titel = content_of_tag(content,"titel",0);
				console.log(titel);
				
				article_i++
			}
		}
		
	
	    document.getElementById('blogg_inlägg').innerHTML = buffer
	  })
	

    </script>
</body>
 
</html>
