<!DOCTYPE html>
<html lang="en">
 
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>GAFFEL</title>
	<link rel="icon" type="image/x-icon" href="/favicon.ico">
	
	<style>
		@font-face {
		  font-family: newsagent;
		  src: url(font/Newsagent-Regular.ttf) format("truetype");
		}
		@font-face {
		  font-family: morfeta;
		  src: url(font/MorfetaGealmord-5158V.otf) format("opentype");
		}
		@font-face {
		  font-family: helvetica_bold;
		  src: url(font/Helvetica-Bold.ttf) format("truetype");
		}
		
		body{
			background-color: #044827FF;
			
			margin: 0px;
			padding: 0px;
			    
		}
		
		.blog_area{
			background: #01010100;
			width: clamp(50px,90vw,1000px);
			margin: auto;
			margin-top: 2vw;
		}
		.blog_cont{
			margin-bottom: 10px;
			background: #000000ff;
		}
		.blog_row {
			margin: 1%;
			float: left;
			background: #00000000;
			width: 40%;
		}
		.blog_img{
			float: right;
			width: 55%;
			background: #505050ff;
		}
		.blog_cont::after{
		    content: "";
		    display: table;
		    clear: both;
		}
		.blog_title {
		  padding-top: 1%;
		  font-family: morfeta;
		  font-size: clamp(10px,4vw,40px);
		  line-height: 83%;
		  color: #FFFFFFFF;
		}
		.blog_preamble{
			font-size: clamp(5px,3vw,20px);
			color: #FFFFFFFF;
		}


		.banner{
			  background: black;
			  background-image: url("bilder/gaffel_bakgrund_tavlor.png");
			  background-repeat: no-repeat;
			  background-position-x: center;
			  background-attachment: fixed;
			  background-size: cover;
			  height: 700px;
			  margin: 0px;
			  padding: 0px;
			  display: grid;
		}

		.gaffel_logga{
			margin: auto;
			display: block;
			background: #044827FF;
			padding: 20px 40px;
			font-family: helvetica_bold;
			color: white;
			font-size: clamp(5px,5vw,25px);
			text-align: center;

			width: clamp(100px,80vw,500px);
		}
		.gaffel_logga_bild{
			width: inherit;
			height: auto;
		}
		
	</style>
</head>
 
<body>
	
	<div id = 'web-header'><script> 
		fetch('header.html')
			.then(function(resp){return resp.text()})
			.then(function(resp){
				document.getElementById('web-header').innerHTML = resp;
			});
		
	</script></div>

	<div class = banner>
		<div class = gaffel_logga>
			<img src = "bilder/logga_hel_ny.png" class = gaffel_logga_bild></img>
			<p id = 'slogan'">sveriges farligaste popkulturmagasin</p>
			<script>
				var slogan_array = ['sveriges farligaste popkulturmagasin','sveriges farligaste popkulturmagasin','din kajplats i etern','pedagogiska underhållning i en trivsam miljö'];
				var ny_slogan = slogan_array[Math.floor(Math.random()*slogan_array.length)];
				console.log(ny_slogan);
				document.getElementById('slogan').innerHTML = ny_slogan;
			</script>
		</div>
	</div>
	
	<script>
		function detectMob() {
		    const toMatch = [
		        /Android/i,
		        /webOS/i,
		        /iPhone/i,
		        /iPod/i,
		        /BlackBerry/i,
		        /Windows Phone/i
		    ];
    
		    return toMatch.some((toMatchItem) => {
			return navigator.userAgent.match(toMatchItem);
		    });
		}

		var isMobile = detectMob();
		
		function open_article(str){
			window.location.href = 'https://gaffelmagasin.github.io/artikel' + '?=' + str;
		}
		function content_of_tag(str,tag,start){
			let start_index = str.indexOf("<" + tag + ">",start);
			let end_index =   str.indexOf("</" + tag + ">",start);
			
			if(start_index == -1 || end_index == -1){return -1;}
			let content = str.substring(start_index + tag.length + 2,end_index);
			return content;
		}

		function draw_article_button(div_id, article_name,small){
			
			fetch('artiklar/' + article_name + '/info.txt')
			.then(function(resp){return resp.text()})
			.then(function(resp){

				var a_str = resp;
				
				var titel = content_of_tag(a_str,"titel",0).toUpperCase();
				var ingress = content_of_tag(a_str,"ingress",0);
				var skribent = content_of_tag(a_str,"skribent",0);
				var bild = content_of_tag(a_str,"bild",0);

				var imgw = 55;
				var roww = 40;
				if(small == true){
					imgw = 100;
					roww = 100;
				}
				
				var new_html = `<div>
					<img src = ${bild} class = blog_img id = ${'bild' + div_id} style = "width: ${imgw}%;"></img>
	  				<div class = blog_row style = "width: ${roww}%;">
     						<div class = blog_title id = ${'titel' + div_id}>${titel}</div>
			        		<div class = blog_preamble id = ${'ingress' + div_id}>${ingress}</div>
      					</div>
			        </div>`

				 document.getElementById(div_id).innerHTML = new_html;
			
				var element = document.getElementById(div_id); //grab the element
				element.onmouseover = function(){
					var element2 = document.getElementById(div_id);
					element2.style.background = "#00000000";

				}
			    	element.onmouseout = function(){
					var element2 = document.getElementById(div_id);
					element2.style.background = "#000000FF";


				}
			    	element.onclick = function(){
					open_article(article_name)
				}
			});
			
			
		}
	</script>
	
    	<div id ='blogg_inlägg' class = blog_area>
		<div id = 'main1' class = blog_cont><script>draw_article_button('main1','rostiga-roadtrips',true)</script></div>
		<div id = 'main2' class = blog_cont><script>draw_article_button('main2','hawaiiskjortan',false)</script></div>
		<div id = 'main3' class = blog_cont><script>draw_article_button('main3','rostiga-roadtrips',true)</script></div>   
	 </div>
 

</body>
 
</html>
