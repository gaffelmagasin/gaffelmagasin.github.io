<!DOCTYPE html>
<html>
    <head>
        <style>
            body{
                background-color: #044827FF;
            }
            .artikel_hållare{
                background: #FFFFFFFF;
                margin: auto;
                justify-content: center;

                width: clamp(100px,95vw, 500px);
            }
        </style>
    </head>
    <body>
        <div id='artikel' class = artikel_hållare>
            
        </div>
        
        <script>
        function content_of_tag(str,tag,start){
    		let start_index = str.indexOf("<" + tag + ">",start);
    		let end_index =   str.indexOf("</" + tag + ">",start);
    		
    		if(start_index == -1 || end_index == -1){return -1;}
    		let content = str.substring(start_index + tag.length + 2,end_index);
    		return content;
    	}

        fetch('article_content.txt')
    	  .then(function(resp) { 
    		  return resp.text()
    	   })
    	  .then(function(resp){
    		var a_str = resp;
    		console.log(a_str);
            var url =window.location.href;
            console.log(url);

            var index_in_url = url.indexOf('artikel?=') + 9
            var tag = url.substring(index_in_url,url.length)

            var start_index = a_str.indexOf(tag)
              
            var titel = content_of_tag(a_str,"titel",start_index);
            var preamble = content_of_tag(a_str,"ingress",start_index);
            var text = content_of_tag(a_str,"text",start_index);

            console.log([titel, preamble, text]);
              
            buffer = `<div>
                        <div>${titel}</div>
                        <div>${preamble}</div>
                         <div>${text}</div>
                    </div>
                </div>`
          //console.log(buffer);
          document.getElementById('artikel').innerHTML = buffer;
          
          });
            
          </script>
    </body>
</html>
