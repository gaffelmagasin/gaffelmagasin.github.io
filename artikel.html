<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" type="image/x-icon" href="/favicon.ico">
        <style>
            @font-face {
    		  font-family: morfeta;
    		  src: url(MorfetaGealmord-5158V.otf) format("opentype");
    		}

            
            
            body{
                background-color: #044827FF;
            }
            .artikel_hållare{
                background: #FFFFFFFF;
                margin-top: 15px;
                margin: auto;
                justify-content: center;

                width: clamp(100px,95vw, 1000px);
            }
            .titel{
                  font-family: morfeta;
        		  font-size: clamp(10px,10vw,100px);
        		  line-height: 83%;
        		  color: #000000FF;
                  
                  padding-top: 2%;
                  margin-left: 3%;    
            }
            .ingress{
                  font-family: arial;
                  font-weight: bold;
                  
                  padding-top: 2%;
                  margin-left: 3%; 
                  margin-right: 3%; 
                  color: #000000FF;
            }
            .bröd{
                 font-family: georgia;

                padding-top: 2%;
                margin-left: 3%; 
                 margin-right: 3%;
                padding-bottom: 25px;
                color: #000000FF;
            }
            .blogg_bild{
                width: 100%;
                height: auto;
                
            }
            
        </style>
    </head>
    <body>
        <div id='artikel' class = artikel_hållare>
            
        </div>
        
        <script>
        function content_of_tag(str,tag,start){
    		let start_index = str.indexOf("<" + tag + ">",start);
    		let end_index =   str.indexOf("</" + tag + ">",start);
    		
    		if(start_index == -1 || end_index == -1){return -1;}
    		let content = str.substring(start_index + tag.length + 2,end_index);
    		return content;
    	}

        fetch('article_content.txt')
    	  .then(function(resp) { 
    		  return resp.text()
    	   })
    	  .then(function(resp){
    		var a_str = resp;
    		console.log(a_str);
            var url =window.location.href;
            console.log(url);

            var index_in_url = url.indexOf('artikel?=') + 9
            var tag = url.substring(index_in_url,url.length)

            var start_index = a_str.indexOf('[' + tag + ']')
              
            var titel = content_of_tag(a_str,"titel",start_index);
            var preamble = content_of_tag(a_str,"ingress",start_index);
            var text = content_of_tag(a_str,"text",start_index);
            var bild = content_of_tag(a_str,"bild",start_index);
            var skribent = content_of_tag(a_str,"skribent",start_index);
              
            document.title = titel;
              
            if(start_index != -1){
                buffer = `<div>
                            <img src = ${bild} class = blogg_bild></img>
                            <div class = titel>${titel}</div>
                            <div class = ingress>${preamble}</div>
                             <div class = bröd>${text}</div>
                        </div>
                    </div>`
              //console.log(buffer);
              
            }
            else{
                buffer = `<div class = titel>det är inte du det är jag, den här artikeln finns inte</div>`
            }

            document.getElementById('artikel').innerHTML = buffer;
          });
            
          </script>
    </body>
</html>
