<!DOCTYPE html>
<html>
    <head>
		<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-HR8REX9FGG"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	
	  gtag('config', 'G-HR8REX9FGG');
	</script>

	<script>
	  // Initialize the dataLayer
	  window.dataLayer = window.dataLayer || [];
	
	  // Create the gtag function that pushes to the dataLayer
	  function gtag() {
	    dataLayer.push(arguments);
	  }
	
	  // Set consent defaults
	  gtag('consent', 'default', {
	    analytics_storage: localStorage.getItem('silktideCookieChoice_analytics') === 'true' ? 'granted' : 'denied',
	    ad_storage: localStorage.getItem('silktideCookieChoice_marketing') === 'true' ? 'granted' : 'denied',
	    ad_user_data: localStorage.getItem('silktideCookieChoice_marketing') === 'true' ? 'granted' : 'denied',
	    ad_personalization: localStorage.getItem('silktideCookieChoice_marketing') === 'true' ? 'granted' : 'denied',
	    functionality_storage: localStorage.getItem('silktideCookieChoice_necessary') === 'true' ? 'granted' : 'denied',
	    security_storage: localStorage.getItem('silktideCookieChoice_necessary') === 'true' ? 'granted' : 'denied'
	  });
	</script>
	
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-WM4CVP9Q');</script>
	<!-- End Google Tag Manager -->
	
	<link rel="stylesheet" id="silktide-consent-manager-css" href="cookies/silktide-consent-manager.css">
	<script src="cookies/silktide-consent-manager.js"></script>
	<script>
	silktideCookieBannerManager.updateCookieBannerConfig({
	  background: {
	    showBackground: false
	  },
	  cookieIcon: {
	    position: "bottomRight"
	  },
	  cookieTypes: [
	    {
	      id: "analys",
	      name: "Analys",
	      description: "<p>Dessa <i>cookies </i>hjälper oss att ta reda på vad på hemsidan som är populärt och inte vilket hjälper oss i vårt subversiva uppdrag mot kulturen.</p>",
	      required: false,
	      onAccept: function() {
	        gtag('consent', 'update', {
	          analytics_storage: 'granted',
	        });
	        dataLayer.push({
	          'event': 'consent_accepted_analys',
	        });
	      },
	      onReject: function() {
	        gtag('consent', 'update', {
	          analytics_storage: 'denied',
	        });
	      }
	    },
	    {
	      id: "reklam",
	      name: "Reklam",
	      description: "<p>Sälj din data, omm du vill.</p>",
	      required: false,
	      onAccept: function() {
	        gtag('consent', 'update', {
	          ad_storage: 'granted',
	          ad_user_data: 'granted',
	          ad_personalization: 'granted',
	        });
	        dataLayer.push({
	          'event': 'consent_accepted_advertising',
	        });
	      },
	      onReject: function() {
	        gtag('consent', 'update', {
	          ad_storage: 'denied',
	          ad_user_data: 'denied',
	          ad_personalization: 'denied',
	        });
	      }
	    }
	  ],
	  text: {
	    banner: {
	      description: "<p>Gaffel använder <i>cookies</i>&nbsp;för att massövervaka dig i spaningssyfte.</p>",
	      acceptAllButtonText: "Acceptera alla",
	      acceptAllButtonAccessibleLabel: "Acceptera alla",
	      rejectNonEssentialButtonText: "Avvisa ickenödvändiga",
	      rejectNonEssentialButtonAccessibleLabel: "Avvisa ickenödvändiga",
	      preferencesButtonText: "Inställningar",
	      preferencesButtonAccessibleLabel: "Inställningar"
	    },
	    preferences: {
	      title: "Ändra dina cookies-inställningar",
	      description: "<p>Som en fri själ kan du såklart säga nej till att bli massövervakad av Gaffel, än så länge. Välj nedan vilka <i>cookies</i>&nbsp;du vill använda.</p>",
	      creditLinkText: "",
	      creditLinkAccessibleLabel: ""
	    }
	  }
	});
	</script>

	    
	<meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="/favicon.ico">
       
	<style>
		@font-face {
		  font-family: legaff;
		  src: url(font/Legaff-Regular.otf) format("opentype");
		}

		@font-face {
		  font-family: Atkinson-Bold;
		  src: url(font/AtkinsonHyperlegible-Bold.ttf) format("truetype");
		}
		body{
			background-color: #FFFFFFFF;
			
			margin: 0px;
			padding: 0px;
			max-width: 100%;
		    overflow-x: hidden;
		}

		.holder{
			width: clamp(10px,100vw,1300px);
			height: calc(1700px - 70vw);
			display: flex;
			flex-wrap: wrap;
			flex-direction: column;
			align-content: center;
			margin: auto;
			margin-bottom: 90px;
		}

		.holder_mobile{
			width: 90vw;
			margin: auto;
			margin-bottom: 90px;
		}
		
		.post{
			background: #000000FF;
			width: 300px;
			margin: 10px;
			flex-grow: 3;
		}
		.post_mobile{
			background: #000000FF;
			margin-bottom: 10px;
		}

		.c_titel{
			font-family: legaff;
			line-height: 0.95;
			color: white;
			padding-top: 20px;
			padding-left: 20px;
			padding-right: 20px;
			font-size: 30px;
			margin: 0px;
		}
		.c_bild{
			width: 100%;
			height: auto;
		}
		.c_text{
			color: white;
			font-family: Georgia;
			line-height: 1.1;
			padding-bottom: 10px;
			padding-left: 20px;
			padding-right: 20px;
			margin: 0px;
			margin-top: 10px;
		}
		.c_signatur{
			color: white;
			font-family: Georgia;
			font-style: italic;
			padding: 20px;
			margin: 0px;
		}
		
		.intro{
			color: black;
			font-family: Georgia;
			width: clamp(0px,90vw,200px)
			text-align: center;
		}
		
        </style>
    </head>
    <body>
      
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WM4CVP9Q"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	    
	<script src="https://www.w3schools.com/lib/w3.js"></script>
	<div w3-include-html="header.html"></div>
	<script>w3.includeHTML();</script>
	
	<img src = "bilder/rutan_logotyp.webp" style = "width: clamp(10px, 100%, 600px); height: auto; display: block; margin: auto;"></img>
    <p class = "intro">Det finns många rutor i världen: fönster, schackbräden, rökrutor och post it-lappar. Den här rutan gör inga sådana anspråk men om vi får ge ett råd: stanna en stund, läs lite, eller skriv något. It's hip to be square. </p>
	<div id = "rutan_hållare" class = "holder"></div>
      
	  <script>
		function detectMob() {
		    const toMatch = [
		        /Android/i,
		        /webOS/i,
		        /iPhone/i,
		        /iPod/i,
		        /BlackBerry/i,
		        /Windows Phone/i
		    ];
    
		    return toMatch.some((toMatchItem) => {
			return navigator.userAgent.match(toMatchItem);
		    });
		}

		var isMobile = detectMob();

		if(isMobile){
			document.getElementById('rutan_hållare').classList.remove('holder');
			document.getElementById('rutan_hållare').classList.add('holder_mobile');
		}

    var new_html = ""

    fetch('rutan.txt')
    	   .then(function(resp) { 
            return resp.text()
         })
         .then(function(resp){
	         var str = resp;

			let f = "===";
		    let inl_num = str.split(f).length - 1;
			let str_i = 0
			for (let i = 0; i < inl_num; i++) {
			  	str_i = str.indexOf("===",str_i);

				let next_str_i = str.indexOf("===",str_i+4);

				
				if(str_i != -1){
		
					if(isMobile){new_html += `<div class = "post_mobile">`;}
					else{new_html += `<div class = "post">`;}

					var titel = ""
					var signatur = ""
					var text = ""
					var bild = ""
					
					var titel_i = str.indexOf(`Titel{`,str_i);
					if(titel_i != -1 && ((titel_i < next_str_i) || (next_str_i == -1))){
						var titel_ei = str.indexOf(`}`,titel_i);
						var titel = str.substring(titel_i+6,titel_ei);
					}

					titel = titel.toUpperCase();
					
					var signatur_i = str.indexOf(`Signatur{`,str_i);
					if(signatur_i != -1 && ((signatur_i < next_str_i) || (next_str_i == -1))){
						var signatur_ei = str.indexOf(`}`,signatur_i);
						var signatur = str.substring(signatur_i+9,signatur_ei);
					}
					
					var text_i = str.indexOf(`Text{`,str_i);
					if(text_i != -1 && ((text_i < next_str_i) || (next_str_i == -1))){
						var text_ei = str.indexOf(`}`,text_i);
						var text = str.substring(text_i+5,text_ei);
					}
					
					var bild_i = str.indexOf(`Bild{`,str_i);
					if(bild_i != -1 && ((bild_i < next_str_i) || (next_str_i == -1))){
						var bild_ei = str.indexOf(`}`,bild_i);
						var bild = str.substring(bild_i+5,bild_ei);
					}

					if(titel != ""){new_html += `<p class = "c_titel">${titel}</p>`;}
					if(text != ""){new_html += `<p class = "c_text">${text}</p>`;}
					if(bild != ""){new_html += `<img src = "${bild}" class = "c_bild"></img>`;}
					if(signatur != ""){new_html += `<p class = "c_signatur">${signatur}</p>`;}
					
					new_html += "</div>";
					
					str_i += 4;
				}

			}
			
		
         document.getElementById('rutan_hållare').innerHTML = new_html;
       
        })
    
    </script>

	
	 
    </body>
</html>

