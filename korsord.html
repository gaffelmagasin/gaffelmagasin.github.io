<!DOCTYPE html>
<html>
    <head>
        <title>KORSORD</title>
        <meta name="description" content="LÃ¶s korsord">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>
		@font-face {
		  font-family: newsagent;
		  src: url(font/Newsagent-Regular.ttf) format("truetype");
		}
		@font-face {
		  font-family: morfeta;
		  src: url(font/MorfetaGealmord-5158V.otf) format("opentype");
		}
		@font-face {
		  font-family: helvetica_bold;
		  src: url(font/Helvetica-Bold.ttf) format("truetype");
		}
		 @font-face {
		  font-family: Atkinson-Bold;
		  src: url(font/AtkinsonHyperlegible-Bold.ttf) format("truetype");
		}
	
          body{
            background: black;
            margin: 0px;
            padding: 0px;
          }
          .crossword-grid {
            display: grid;
            gap: 5px;
            margin: 20px auto;
            justify-content: center;
            align-items: center;
        }
        .cell {
            width: 20px;
            height: 20px;
            text-align: center;
            font-size: 20px;
            text-transform: uppercase;
	    caret-color: transparent;
	    outline: none;
	    border: none;
	    padding: 0px;
	    background-color: white;
	    font-family: Atkinson-Bold;
        }
        .cell:focus {
            background-color: Gainsboro;
        }
        .grid-container {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
        }
        </style>
    </head>
    <body>

	<script src="https://www.w3schools.com/lib/w3.js"></script>
	<div w3-include-html="header.html"></div>
	<script>w3.includeHTML();</script>
	    
	<script src = "script_closed.js"></script>

    <div class="grid-container">
        <div id="crossword-container" class="crossword-grid"></div>
    </div>

    <script>
	var rot = true;
	    
        function generateGrid() {

	    const game_size = Math.min(600,0.8*innerWidth);
		
	    const gridSize = 5;
	    const symbol_grid = [[1,0,0,0,0],[0,0,0,0,0],[0,0,1,0,0],[0,0,0,0,0],[0,0,0,0,1]]
		
	    const cell_size = game_size / gridSize;
		
	    const crosswordContainer = document.getElementById("crossword-container");
            crosswordContainer.innerHTML = '';  // Clear any existing grid

            crosswordContainer.style.gridTemplateColumns = `repeat(${gridSize}, ${cell_size}px)`;
            crosswordContainer.style.gridTemplateRows = `repeat(${gridSize}, ${cell_size}px)`;

            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    const inputCell = document.createElement("input");
                    inputCell.classList.add("cell");
		    inputCell.style.cssText = `width: ${cell_size}px; height: ${cell_size}px;`;
		    inputCell.style.fontSize = `${cell_size-10}px`;
		    inputCell.id = `${col}-${row}`;
                    inputCell.maxLength = 0; // Restrict to a single character
                     var symbol = symbol_grid[col][row];
		    if(symbol == 1){
			inputCell.value = "?";
			inputCell.style.backgroundColor = "black";
		    }
		    console.log(symbol);
			
		    inputCell.addEventListener("input", function(event) {

		   
			    
                    });
		    inputCell.addEventListener("focus", function(event){
   			if(this.value == "?"){
				var id_str = this.id;
				id_str = id_str.split("-");
				var xx = Number(id_str[0])
				var yy = Number(id_str[1])

				if(rot){
					xx++
				}
				else{
					yy++
				}
				if(xx>=gridSize){xx-=gridSize; yy++;}
				if(yy>=gridSize){yy-=gridSize; xx++;}
				var new_id = String(xx) + "-" + String(yy);
				
				document.getElementById(new_id).focus();
			}
		    });
		    inputCell.addEventListener("keydown", function(event){
   			//console.log(event.key);
			var k = event.target.value.splice(-1);
			if(k == " "){
				rot = !rot;
			}
			else{
	                        if (!/^[A-Za-z]$/.test(k)) {
	                            //event.target.value = ""; // Clear non-letter input
	                        }
				else{
					event.target.value = k;
					var id_str = this.id;
					id_str = id_str.split("-");
					var xx = Number(id_str[0])
					var yy = Number(id_str[1])
		
					//console.log(xx);
					//console.log(yy);
					if(rot){
						xx++
					}
					else{
						yy++
					}
					if(xx>=gridSize){xx-=gridSize}
					if(yy>=gridSize){yy-=gridSize}
					var new_id = String(xx) + "-" + String(yy);
					
					document.getElementById(new_id).focus();
				}
			};
		    });
                    crosswordContainer.appendChild(inputCell);
                }
            }
        }

        // Generate grid on page load
        window.onload = generateGrid;

	
	
	
    </script>
    </body>
</html>
